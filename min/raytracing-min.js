var canvas=document.getElementById("testCanvas"),ctx=canvas.getContext("2d"),w=canvas.attributes.width.value,h=canvas.attributes.height.value;ctx.fillStyle="rgb(0, 0, 0)",ctx.fillRect(0,0,w,h);for(var imgdata=ctx.getImageData(0,0,w,h),pixels=imgdata.data,i=0,y=0;h>y;y++)for(var x=0;w>x;x++)pixels[i++]=x/w*255,pixels[i++]=y/h*255,pixels[i++]=0,pixels[i++]=255;ctx.putImageData(imgdata,0,0);